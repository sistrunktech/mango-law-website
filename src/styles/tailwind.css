/* Latin subsets only (fewer font files on the critical path). */
@import '@fontsource/inter/latin-400.css';
@import '@fontsource/inter/latin-600.css';
@import '@fontsource/inter/latin-700.css';
@import '@fontsource/lora/latin-400.css';
@import '@fontsource/lora/latin-700.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   CSS Custom Properties (Design Tokens)
   ============================================ */
:root {
  /* Brand Colors - Professional & Authoritative */
  --color-black: #0A0A0A;
  --color-mango: #E8A33C;
  --color-gold: #D4A84B;
  --color-off-white: #FAF9F7;
  --color-leaf: #2F5F4F;        /* Sophisticated forest green */
  --color-leaf-light: #3D7360;
  --color-leaf-dark: #1F3F2F;
  --color-emerald: #22C55E;     /* Bright emerald for success */
  --color-forest: #1B4332;      /* Deep forest green */
  --color-cream: #FFF8E7;
  --color-charcoal: #0F0F0F;

  /* Typography */
  --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-display: 'Lora', Georgia, serif;

  /* Spacing */
  --section-padding-y: 5rem;
  --section-padding-y-lg: 7rem;

  /* Transitions */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 400ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Enhanced Shadows */
  --shadow-card: 0 4px 20px -4px rgba(0, 0, 0, 0.08), 0 2px 8px -2px rgba(0, 0, 0, 0.04);
  --shadow-card-hover: 0 12px 40px -8px rgba(0, 0, 0, 0.15), 0 4px 16px -4px rgba(0, 0, 0, 0.08);
  --shadow-lift: 0 10px 40px -10px rgba(0, 0, 0, 0.2), 0 4px 16px -4px rgba(0, 0, 0, 0.1);
  --shadow-glow: 0 0 40px -10px rgba(232, 163, 60, 0.4);

  color: var(--color-black);
  background-color: var(--color-off-white);
}

/* ============================================
   Base Layer Overrides
   ============================================ */
@layer base {
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    font-family: var(--font-sans);
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    text-rendering: optimizeLegibility;
  }
  
  /* Improved heading defaults */
  h1, h2, h3, h4, h5, h6 {
    text-wrap: balance;
  }
  
  p {
    text-wrap: pretty;
  }
  
  /* Focus styles for accessibility */
  :focus-visible {
    outline: 2px solid var(--color-mango);
    outline-offset: 2px;
  }
  
  /* Selection styling */
  ::selection {
    background-color: var(--color-mango);
    color: var(--color-black);
  }
}

/* ============================================
   Component Layer
   ============================================ */
@layer components {
  /* Enhanced Button Styles */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-lg px-6 py-3 text-sm font-bold transition-all duration-300;
  }

  .btn-primary {
    @apply relative overflow-hidden bg-brand-mango text-brand-black shadow-md hover:bg-brand-gold hover:shadow-lg hover:-translate-y-1 active:translate-y-0;
  }

  .btn-primary::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transform: translateX(-100%);
    transition: transform 0.6s;
  }

  .btn-primary:hover::after {
    transform: translateX(100%);
  }

  .btn-secondary {
    @apply border-2 border-brand-leaf text-brand-leaf hover:bg-brand-leaf hover:text-white hover:shadow-glow-leaf hover:-translate-y-1 active:translate-y-0;
  }

  .btn-ghost {
    @apply text-brand-black hover:bg-brand-black/5;
  }

  .btn-dark {
    @apply bg-brand-black text-brand-offWhite hover:bg-brand-leaf hover:shadow-soft;
  }

  /* Enhanced Card Styles */
  .card {
    @apply rounded-2xl border border-brand-black/10 bg-white p-6 shadow-soft transition-all duration-300;
  }

  .card-hover {
    @apply hover:-translate-y-2 hover:shadow-lift hover:border-brand-leaf/20;
  }

  .card-interactive {
    @apply cursor-pointer hover:-translate-y-2 hover:shadow-lift-lg hover:border-brand-leaf/30 active:translate-y-0;
  }

  .card-interactive::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 1rem;
    background: linear-gradient(135deg, rgba(47, 95, 79, 0.02) 0%, transparent 50%, rgba(232, 163, 60, 0.02) 100%);
    opacity: 0;
    transition: opacity 0.3s;
  }

  .card-interactive:hover::before {
    opacity: 1;
  }
  
  /* Section spacing */
  .section {
    @apply py-16 md:py-20 lg:py-24;
  }
  
  .section-tight {
    @apply py-12 md:py-16;
  }
  
  /* Eyebrow text */
  .eyebrow {
    @apply text-xs font-semibold uppercase tracking-[0.2em];
  }
  
  /* Gradient text */
  .text-gradient {
    @apply bg-gradient-to-r from-brand-mango to-brand-gold bg-clip-text text-transparent;
  }
  
  /* Decorative accent line */
  .accent-line {
    @apply h-1 w-12 rounded-full bg-brand-mango;
  }

  /* Divider with icon */
  .divider {
    @apply flex items-center gap-3 text-brand-black/20;
  }

  .divider::before,
  .divider::after {
    content: '';
    @apply h-px flex-1 bg-current;
  }
}

/* ============================================
   Utility Layer
   ============================================ */
@layer utilities {
  /* Smooth image loading */
  .img-loading {
    @apply bg-brand-black/5 animate-pulse;
  }

  /* Glass effect */
  .glass {
    @apply bg-white/80 backdrop-blur-md;
  }

  .glass-dark {
    @apply bg-brand-black/80 backdrop-blur-md;
  }

  /* Subtle texture overlay */
  .texture-subtle::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image:
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(255, 255, 255, 0.02) 2px,
        rgba(255, 255, 255, 0.02) 4px
      );
    pointer-events: none;
    z-index: 1;
  }

  /* Noise texture for depth */
  .texture-noise::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 1;
  }

  /* Duotone photo effect */
  .duotone-forest {
    position: relative;
    isolation: isolate;
  }

  .duotone-forest::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(47, 95, 79, 0.25) 0%, rgba(232, 163, 60, 0.15) 100%);
    mix-blend-mode: multiply;
    pointer-events: none;
    z-index: 1;
  }

  /* Enhanced hover glow */
  .hover-glow {
    transition: filter var(--transition-base), box-shadow var(--transition-base);
  }

  .hover-glow:hover {
    filter: brightness(1.05);
    box-shadow: var(--shadow-glow);
  }

  /* Cloudflare Turnstile */
  .turnstile-widget {
    max-width: 100%;
    overflow: hidden;
  }

  .turnstile-widget iframe {
    display: block;
    max-width: 100% !important;
  }

  /* Reduce “boxed” look for embedded CAPTCHA containers */
  .turnstile-widget > div {
    margin: 0 !important;
  }
}

/* ============================================
   Link defaults
   ============================================ */
a {
  color: inherit;
  text-decoration: none;
}

/* ============================================
   Accessibility Styles
   ============================================ */

html[data-font-size="default"] {
  font-size: 16px;
}

html[data-font-size="medium"] {
  font-size: 18px;
}

html[data-font-size="large"] {
  font-size: 20px;
}

html[data-font-size="x-large"] {
  font-size: 24px;
}

.high-contrast-mode {
  --color-black: #000000;
  --color-off-white: #FFFFFF;
  --color-mango: #FFA500;
  --color-leaf: #006400;
}

.high-contrast-mode body {
  background-color: #FFFFFF;
  color: #000000;
}

.high-contrast-mode a {
  color: #0000EE;
  text-decoration: underline;
}

.high-contrast-mode button {
  border: 2px solid #000000;
}

.high-contrast-mode .border {
  border-color: #000000 !important;
}

.high-contrast-mode .shadow-soft,
.high-contrast-mode .shadow-md,
.high-contrast-mode .shadow-lg {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
}

.reduce-motion,
.reduce-motion *,
.reduce-motion *::before,
.reduce-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

.underline-links a {
  text-decoration: underline;
  text-underline-offset: 3px;
}

.underline-links .btn,
.underline-links button {
  text-decoration: none;
}

.enhanced-focus :focus-visible {
  outline: 4px solid var(--color-mango);
  outline-offset: 4px;
}

.dyslexia-font,
.dyslexia-font * {
  font-family: 'OpenDyslexic', 'Comic Sans MS', cursive, sans-serif !important;
}

.dyslexia-font h1,
.dyslexia-font h2,
.dyslexia-font h3,
.dyslexia-font h4,
.dyslexia-font h5,
.dyslexia-font h6 {
  font-family: 'OpenDyslexic', 'Comic Sans MS', cursive, sans-serif !important;
}

.increased-spacing {
  line-height: 1.75;
  letter-spacing: 0.03em;
  word-spacing: 0.15em;
}

.increased-spacing p {
  line-height: 1.85;
}

.increased-spacing h1,
.increased-spacing h2,
.increased-spacing h3,
.increased-spacing h4,
.increased-spacing h5,
.increased-spacing h6 {
  line-height: 1.4;
  letter-spacing: 0.02em;
}

.large-cursor {
  cursor: none !important;
}

.large-cursor * {
  cursor: none !important;
}

.large-cursor::after {
  content: '';
  position: fixed;
  width: 32px;
  height: 32px;
  border: 3px solid var(--color-mango);
  border-radius: 50%;
  pointer-events: none;
  z-index: 9999;
  transform: translate(-50%, -50%);
  transition: transform 0.1s ease-out;
  background-color: rgba(232, 163, 60, 0.2);
  animation: cursor-pulse 2s infinite;
}

@keyframes cursor-pulse {
  0%, 100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.2);
    opacity: 0.8;
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
